{"version":2,"type":"job","id":"af1ac29d-f3a8-4094-8628-8401a6e84658","name":"Marketing.cpf","label":"Marketing","description":"","created":1484154698854,"modified":1484154743380,"notes":"","parameters":{"server":"","target":"com.sas.ep.sascoder.execution.producers.VPP","action":"processFlow","priority":"Reserved"},"properties":{"left":"20","top":"20","width":"100","height":"60","region":"output","fillcolor":"#FCFCFC","linecolor":"#9a9a9a","tooltip":"","portsonly":false,"key":"control","visible":true,"readonly":false},"steps":[{"version":2,"type":"code","id":"1f2718f7-bb04-46db-8c02-f693e2845f9d","name":"","label":"Orders","description":"","created":1484154698856,"modified":1484154698856,"notes":"","parameters":{"server":"","target":"com.sas.ep.sascoder.execution.producers.VPP","action":"runSASCode","priority":"Reserved","code":"/********************************************************************/\n/* Program Name: Orders.sas \t\t\t\t\t\t\t\t\t\t*/\n/* Author: Isaac Murray                                             */\n/* Purpose: Generates stats and graphs for order data               */\n/********************************************************************/\n\n* Box plot of orders by gender;\nproc sort data=CUSTS.MERGED;\n\tby gender;\nrun;\nproc boxplot data=CUSTS.MERGED;\n\tplot OrderAmount*gender;\n\tinsetgroup N;\nrun;\n\n* Box plot of orders by region;\nproc sort data=CUSTS.MERGED;\n\tby Region;\nrun;\nproc boxplot data=CUSTS.MERGED;\n\tplot OrderAmount*Region;\n\tinsetgroup N;\nrun;\n\n* Box plot of orders by order month;\nproc sort data=CUSTS.MERGED;\n\tby OrderMonth;\nrun;\nproc boxplot data=CUSTS.MERGED;\n\tplot OrderAmount*OrderMonth;\n\tinsetgroup N;\nrun;\n\n* Box plot of orders by order month;\nproc sort data=CUSTS.MERGED;\n\tby OrderYear;\nrun;\nproc boxplot data=CUSTS.MERGED;\n\tplot OrderAmount*OrderYear;\n\tinsetgroup N;\nrun;\n\n* Box plot of orders by custno;\nproc sort data=CUSTS.ORDERS;\n\tby custno;\nrun;\n\nproc boxplot data=CUSTS.ORDERS ;\n\tplot OrderAmount*custno;\n\tinsetgroup N;\nrun;\n\n\n/*\nproc sort data=CUSTS.ORDERS;\n\tby OrderMonth;\nrun;\n\nproc tabulate data=CUSTS.MERGED out=CUSTS.ORDERSBYREGION;\n  \tclass Region;\n  \tvar OrderAmount;\n  \ttables Region, OrderAmount*(N sum mean max);\nrun;\n\nproc sgplot data=CUSTS.MERGED;\n\tvbar OrderAmount / stat=mean group=custno nostatlabel;\n\txaxis display=(nolabel);\n\tyaxis grid;\nrun;\n\n\nproc sgpanel data=CUSTS.ORDERS;\n\tpanelby OrderMonth/ layout=columnlattice onepanel colheaderpos=bottom rows=1 \n\t\tnovarname noborder;\n\tvbar regionlong/ group=regionlong stat=mean group=regionlong nostatlabel;\n\tcolaxis display=none;\n\trowaxis grid;\nrun;\n*/\n","snippet":"","resource":false,"dependencies":["425d2a2b-6932-4c65-89ff-b0d6fc249d24"]},"properties":{"left":"316","top":"302","width":"100","height":"60","region":"output","fillcolor":"#E0E6F1","linecolor":"#6882a3","tooltip":"Orders","portsonly":true,"key":"control","visible":true}},{"version":2,"type":"code","id":"425d2a2b-6932-4c65-89ff-b0d6fc249d24","name":"","label":"Import","description":"","created":1484154698857,"modified":1484154698857,"notes":"","parameters":{"server":"","target":"com.sas.ep.sascoder.execution.producers.VPP","action":"runSASCode","priority":"Reserved","code":"/********************************************************************/\n/* Program Name: Import.sas \t\t\t\t\t\t\t\t\t\t*/\n/* Author: Isaac Murray                                             */\n/* Purpose: Imports csv files containing raw data and creates       */\n/*          intermediate tables                                     */\n/********************************************************************/\n\n* path variable should be changed to the SAS path of deployment;\n%let path = /folders/myshortcuts/Coursework/ProgAssessment;\n\n* Create library for referenced tables;\nDATA _NULL_;\n\tLIBNAME CUSTS \"&path\";\nRUN;\n\n* Section below imports raw datafiles and generates tables for later analysis;\nDATA _NULL_;\n\tFILENAME REFFILE \"&path/CUSTOMERS.csv\";\nRUN;\n\nPROC IMPORT DATAFILE=REFFILE DBMS=CSV OUT=CUSTS.RAWCUSTOMERS;\n\tGETNAMES=YES;\nRUN;\n\nDATA _NULL_;\n\tFILENAME REFFILE \"&path/ORDERS.csv\";\nRUN;\n\nPROC IMPORT DATAFILE=REFFILE DBMS=CSV OUT=CUSTS.RAWORDERS;\n\tGETNAMES=YES;\nRUN;\n\nDATA _NULL_;\n\tFILENAME REFFILE \"&path/POSTCODES.csv\";\nRUN;\n\nPROC IMPORT DATAFILE=REFFILE DBMS=CSV OUT=CUSTS.RAWPOSTCODES;\n\tGETNAMES=YES;\nRUN;\n\n","snippet":"","resource":false},"properties":{"left":"158","top":"221","width":"100","height":"60","region":"output","fillcolor":"#E0E6F1","linecolor":"#6882a3","tooltip":"Import","portsonly":true,"key":"control","visible":true}},{"version":2,"type":"code","id":"d705295f-3608-4c27-8eec-4cfca0e85790","name":"","label":"Customers","description":"","created":1484154698857,"modified":1484154698857,"notes":"","parameters":{"server":"","target":"com.sas.ep.sascoder.execution.producers.VPP","action":"runSASCode","priority":"Reserved","code":"/********************************************************************/\n/* Program Name: Customers.sas \t\t\t\t\t\t\t\t\t\t*/\n/* Author: Isaac Murray                                             */\n/* Purpose: Generates stats and graphs for customer data            */\n/********************************************************************/\n\n* Sort to enable grouping by gender;\nproc sort data=custs.customers;\n\tby gender;\nrun;\n\n* Table of customer age by gender;\ntitle 'Customers by age and gender';\nproc means data=custs.customers maxdec=2\n\t\t   N mean median min max q1 q3;\n\tvar age;\n\tby Gender;\nrun;\n* Box plot of customer age by gender;\nproc boxplot data=custs.customers;\n\tplot age*gender;\n\tinsetgroup N;\nrun;\n\n* Clustered bar chart of customers per age range by gender;\nproc sgplot data=custs.customers;\n\tvbar AgeRange/ stat=freq group=gender nostatlabel groupdisplay=cluster;\n\txaxis display=(nolabel);\n\tyaxis grid;\nrun;\n\n* Sort to enable grouping by region;\nproc sort data=custs.customers;\n\tby region;\nrun;\n\n* Table of customer age by region;\ntitle 'Customers by age and region';\nproc means data=custs.customers maxdec=2\n\t\t   N mean median min max q1 q3;\n\tvar age;\n\tby region;\nrun;\n\n* Box plot of customer age by region;\nproc boxplot data=custs.customers;\n\tplot age*region;\n\tinsetgroup N;\nrun;\n\n* Stacked bar chart of customers per region by gender;\ntitle 'Customers by gender and region';\nproc sgplot data=custs.customers;\n\tvbar region / stat=freq group=gender nostatlabel groupdisplay=stack;\n\txaxis display=(nolabel);\n\tyaxis grid;\nrun;\n\n\nproc corr data=custs.customers;\nrun;\n*proc reg data=custs.customers;\n\n  ","snippet":"","resource":false,"dependencies":["425d2a2b-6932-4c65-89ff-b0d6fc249d24"]},"properties":{"left":"315","top":"143","width":"100","height":"60","region":"output","fillcolor":"#E0E6F1","linecolor":"#6882a3","tooltip":"Customers","portsonly":true,"key":"control","visible":true}},{"version":2,"type":"code","id":"9b53b241-b0b0-46f8-81a9-ccfe15f0af97","name":"","label":"Cleanup","description":"","created":1484154698857,"modified":1484154698857,"notes":"","parameters":{"server":"","target":"com.sas.ep.sascoder.execution.producers.VPP","action":"runSASCode","priority":"Reserved","code":"/********************************************************************/\n/* Program Name: Cleanup.sas \t\t\t\t\t\t\t\t\t\t*/\n/* Author: Isaac Murray                                             */\n/* Purpose: Cleans up tables and library created during processing  */\n/********************************************************************/\n\n\n* Clean up tables and library ;\n%web_drop_table(CUSTS.MERGED);\n%web_drop_table(CUSTS.CUSTOMERS);\n%web_drop_table(CUSTS.ORDERS);\n%web_drop_table(CUSTS.RAWORDERS);\n%web_drop_table(CUSTS.RAWPOSTCODES);\n%web_drop_table(CUSTS.RAWCUSTOMERS);\nlibname CUSTS clear;","snippet":"","resource":false,"dependencies":["d705295f-3608-4c27-8eec-4cfca0e85790","1f2718f7-bb04-46db-8c02-f693e2845f9d"]},"properties":{"left":"525","top":"228","width":"100","height":"60","region":"output","fillcolor":"#E0E6F1","linecolor":"#6882a3","tooltip":"Cleanup","portsonly":true,"key":"control","visible":true}},{"version":2,"type":"query","id":"4212cb41-67e3-42c1-8ef5-f06d555df1c8","name":"","label":"Query","description":"","created":1484154832422,"modified":1484155692187,"notes":"","parameters":{"server":"","target":"com.sas.ep.sascoder.execution.producers.VPP","action":"runSASCode","priority":"Reserved","code":"%web_drop_table(WORK.QUERY);\r\n\r\n/* Query code generated for SAS Studio by Common Query Services */\r\rPROC SQL; \nCREATE TABLE WORK.QUERY \nAS \nSELECT MERGED.gender, MAX(MERGED.OrderAmount) \nAS OrderAmount \nFROM CUSTS.MERGED MERGED \nGROUP BY MERGED.gender; \nQUIT;\r\n\r\n%web_open_table(WORK.QUERY);","outputType":"Table","outputName":"QUERY","outputLocation":"WORK","distinct":false,"filters":[],"sorts":[],"columns":[{"name":"gender","tableId":"5ed7f487-a8a4-4538-8b05-76f4a26576fa","expression":"","calculated":false,"alias":"","aggregate":""},{"name":"OrderAmount","tableId":"5ed7f487-a8a4-4538-8b05-76f4a26576fa","expression":"","calculated":false,"alias":"","aggregate":"MAX"}],"groups":[{"name":"gender","tableId":"5ed7f487-a8a4-4538-8b05-76f4a26576fa","expression":"","calculated":false,"alias":"","aggregate":""}],"autoGroups":true,"updatingGroups":false},"properties":{"left":"50","top":"30","width":"100","height":"60","region":"output","fillcolor":"#E0E6F1","linecolor":"#6882a3","tooltip":"Query","portsonly":true,"key":"control","visible":true,"readonly":false},"nodes":[{"version":2,"type":"table","id":"5ed7f487-a8a4-4538-8b05-76f4a26576fa","name":"MERGED","label":"MERGED","description":"","created":1484155608800,"modified":1484155619171,"notes":"","parameters":{"server":"","source":"libraries~CUSTS/MERGED.DATA","libref":"CUSTS","library":"","calculated":false},"properties":{"left":"21","top":"27","width":"125","height":"50","region":"output","fillcolor":"#E0E6F1","linecolor":"#6882a3","tooltip":"MERGED","portsonly":false,"key":"control","visible":true}}]}],"ports":[{"version":2,"type":"port","id":"892fa147-31a6-470a-8ea6-9c999d4d6bc5","name":"","label":"","description":"","created":1484154698858,"modified":1484154698858,"notes":"","parameters":{},"properties":{"left":"296","top":"325","width":"13","height":"13","parent":"1f2718f7-bb04-46db-8c02-f693e2845f9d","region":"input","readonly":false,"disabled":false,"fillcolor":"#E0E6F1","linecolor":"#6882a3","key":"control"}},{"version":2,"type":"port","id":"ca42e567-4f1e-46b5-88f0-15ce16c8fa2f","name":"","label":"","description":"","created":1484154698859,"modified":1484154698859,"notes":"","parameters":{},"properties":{"left":"423","top":"325","width":"13","height":"13","parent":"1f2718f7-bb04-46db-8c02-f693e2845f9d","region":"output","readonly":false,"disabled":false,"fillcolor":"#E0E6F1","linecolor":"#6882a3","key":"control"}},{"version":2,"type":"port","id":"aa04798f-e054-46e7-8e75-71a7c07e5af8","name":"","label":"","description":"","created":1484154698859,"modified":1484154698859,"notes":"","parameters":{},"properties":{"left":"138","top":"244","width":"13","height":"13","parent":"425d2a2b-6932-4c65-89ff-b0d6fc249d24","region":"input","readonly":false,"disabled":false,"fillcolor":"#E0E6F1","linecolor":"#6882a3","key":"control"}},{"version":2,"type":"port","id":"ab500ac4-1082-4f3a-8799-cf44c2a8ae1d","name":"","label":"","description":"","created":1484154698860,"modified":1484154698860,"notes":"","parameters":{},"properties":{"left":"265","top":"244","width":"13","height":"13","parent":"425d2a2b-6932-4c65-89ff-b0d6fc249d24","region":"output","readonly":false,"disabled":false,"fillcolor":"#E0E6F1","linecolor":"#6882a3","key":"control"}},{"version":2,"type":"port","id":"f4c7e876-3e60-4942-8f2b-181c61d3b34a","name":"","label":"","description":"","created":1484154698860,"modified":1484154698860,"notes":"","parameters":{},"properties":{"left":"295","top":"166","width":"13","height":"13","parent":"d705295f-3608-4c27-8eec-4cfca0e85790","region":"input","readonly":false,"disabled":false,"fillcolor":"#E0E6F1","linecolor":"#6882a3","key":"control"}},{"version":2,"type":"port","id":"3f0874d6-ca67-42ab-8707-b2e24c080dd9","name":"","label":"","description":"","created":1484154698861,"modified":1484154698861,"notes":"","parameters":{},"properties":{"left":"422","top":"166","width":"13","height":"13","parent":"d705295f-3608-4c27-8eec-4cfca0e85790","region":"output","readonly":false,"disabled":false,"fillcolor":"#E0E6F1","linecolor":"#6882a3","key":"control"}},{"version":2,"type":"port","id":"1391a8fb-65cd-4496-8db0-c37984b31a9b","name":"","label":"","description":"","created":1484154698861,"modified":1484154698861,"notes":"","parameters":{},"properties":{"left":"505","top":"251","width":"13","height":"13","parent":"9b53b241-b0b0-46f8-81a9-ccfe15f0af97","region":"input","readonly":false,"disabled":false,"fillcolor":"#E0E6F1","linecolor":"#6882a3","key":"control"}},{"version":2,"type":"port","id":"c124a71d-af2d-4e76-84fe-8aaf1c6b3b74","name":"","label":"","description":"","created":1484154698861,"modified":1484154698861,"notes":"","parameters":{},"properties":{"left":"632","top":"251","width":"13","height":"13","parent":"9b53b241-b0b0-46f8-81a9-ccfe15f0af97","region":"output","readonly":false,"disabled":false,"fillcolor":"#E0E6F1","linecolor":"#6882a3","key":"control"}},{"version":2,"type":"port","id":"39a9677c-b0e6-452b-8fe3-ffabef8bc17d","name":"","label":"","description":"","created":1484154832477,"modified":1484154832483,"notes":"","parameters":{},"properties":{"left":"30","top":"53","width":"13","height":"13","parent":"4212cb41-67e3-42c1-8ef5-f06d555df1c8","region":"input","readonly":false,"disabled":false,"fillcolor":"#E0E6F1","linecolor":"#6882a3","key":"control"}},{"version":2,"type":"port","id":"214ca91f-aa94-4913-8f27-4141814a09fc","name":"","label":"","description":"","created":1484154832483,"modified":1484154832490,"notes":"","parameters":{},"properties":{"left":"157","top":"53","width":"13","height":"13","parent":"4212cb41-67e3-42c1-8ef5-f06d555df1c8","region":"output","readonly":false,"disabled":false,"fillcolor":"#E0E6F1","linecolor":"#6882a3","key":"control"}}],"connectors":[{"version":2,"type":"link","id":"db40a54f-3e65-4cb4-8da8-bea1932fd971","name":"","label":"","description":"","created":1484154698862,"modified":1484154698862,"notes":"","parameters":{},"properties":{"linecolor":"#C0C0C0","linestyle":"Dash"},"sources":[{"value":"ab500ac4-1082-4f3a-8799-cf44c2a8ae1d"}],"targets":[{"value":"892fa147-31a6-470a-8ea6-9c999d4d6bc5"}]},{"version":2,"type":"link","id":"03d06788-d9eb-46c1-8132-33f6618756b9","name":"","label":"","description":"","created":1484154698863,"modified":1484154698863,"notes":"","parameters":{},"properties":{"linecolor":"#C0C0C0","linestyle":"Dash"},"sources":[{"value":"ab500ac4-1082-4f3a-8799-cf44c2a8ae1d"}],"targets":[{"value":"f4c7e876-3e60-4942-8f2b-181c61d3b34a"}]},{"version":2,"type":"link","id":"14106fd0-2b5d-4a75-8add-0f1f00662cc2","name":"","label":"","description":"","created":1484154698863,"modified":1484154698863,"notes":"","parameters":{},"properties":{"linecolor":"#C0C0C0","linestyle":"Dash"},"sources":[{"value":"3f0874d6-ca67-42ab-8707-b2e24c080dd9"}],"targets":[{"value":"1391a8fb-65cd-4496-8db0-c37984b31a9b"}]},{"version":2,"type":"link","id":"bf2b62a4-5af5-44b2-88a6-7084c5f3a449","name":"","label":"","description":"","created":1484154698863,"modified":1484154698863,"notes":"","parameters":{},"properties":{"linecolor":"#C0C0C0","linestyle":"Dash"},"sources":[{"value":"ca42e567-4f1e-46b5-88f0-15ce16c8fa2f"}],"targets":[{"value":"1391a8fb-65cd-4496-8db0-c37984b31a9b"}]}]}